<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ –®–∏–Ω—ç –ñ–∏–ª–∏–π–Ω –°—É–≥–∞–ª–∞–∞ üéÅ</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&family=Mountains+of+Christmas:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –®–ò–ù–≠ –ñ–ò–õ–ò–ô–ù ”®–ù–ì”®–ù–ò–ô –°–•–ï–ú */
        :root {
            --christmas-red: #c41e3a;       /* –®–∏–Ω—ç –∂–∏–ª–∏–π–Ω —É–ª–∞–∞–Ω */
            --christmas-green: #2d5a27;     /* –®–∏–Ω—ç –∂–∏–ª–∏–π–Ω –Ω–æ–≥–æ–æ–Ω */
            --snow-white: #f0f8ff;          /* –¶–∞—Å–∞–Ω —Ü–∞–≥–∞–∞–Ω */
            --gold: #ffd700;                /* –ê–ª—Ç */
            --silver: #c0c0c0;              /* –ú”©–Ω–≥”© */
            --dark-blue: #0a2e5c;           /* –®”©–Ω–∏–π–Ω —Ç—ç–Ω–≥—ç—Ä */
            --light-blue: #4a90e2;          /* –¶—ç–ª–º—ç–≥ —Ö”©—Ö */
            --shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.15);
            --shadow-glow: 0 0 25px rgba(255, 215, 0, 0.5);
            --gradient-holiday: linear-gradient(135deg, #c41e3a 0%, #2d5a27 100%);
            --gradient-snow: linear-gradient(135deg, #f0f8ff 0%, #e6f7ff 100%);
            --gradient-night: linear-gradient(135deg, #0a2e5c 0%, #1a3d7c 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--gradient-night);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #333;
            position: relative;
            overflow-x: hidden;
            /* FIXED: –ë“Ø—Ö—ç–ª –¥—ç–ª–≥—ç—Ü —á–∏—á–∏—Ä—ç—Ö–≥“Ø–π –±–æ–ª–≥–æ—Ö */
            overflow-y: auto;
        }

        /* –¶–ê–°–ù–´ –≠–§–§–ï–ö–¢ */
        .snowflakes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* –®–ò–ù–≠ –ñ–ò–õ–ò–ô–ù –ß–ê–ù–ê–† –•–≠–í –ó“Æ–ô */
        .christmas-font {
            font-family: 'Mountains of Christmas', cursive;
        }

        /* –ì–û–õ –ö–û–ù–¢–ï–ô–ù–ï–† */
        .main-container {
            display: flex;
            flex-direction: column;
            max-width: 1400px;
            width: 100%;
            min-height: 90vh;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: var(--shadow-soft);
            position: relative;
            z-index: 1;
            border: 8px solid var(--christmas-red);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 20%);
            /* FIXED: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∏—á–∏—Ä—ç—Ö–≥“Ø–π –±–æ–ª–≥–æ—Ö */
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
            -webkit-font-smoothing: antialiased;
        }

        @media (min-width: 1024px) {
            .main-container {
                flex-direction: row;
            }
        }

        /* –ó“Æ“Æ–ù –¢–ê–õ - –°–ê–ù–¢–ê–ì–ò–ô–ù –¢–ê–õ–ë–ê–† */
        .santa-sidebar {
            width: 100%;
            background: linear-gradient(180deg, var(--christmas-red) 0%, #8b0000 100%);
            padding: 25px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        @media (min-width: 1024px) {
            .santa-sidebar {
                width: 400px;
                min-width: 400px;
            }
        }

        .santa-sidebar::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            background: var(--snow-white);
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .santa-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 1;
        }

        .santa-icon {
            font-size: 4rem;
            margin-bottom: 10px;
            text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.2);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .santa-title {
            font-family: 'Mountains of Christmas', cursive;
            font-weight: 700;
            font-size: 2.5rem;
            color: white;
            text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        .santa-subtitle {
            color: var(--gold);
            font-size: 1rem;
            margin-top: 5px;
            font-weight: 600;
        }

        /* –¢–û–•–ò–†–£–£–õ–ì–´–ù –•–≠–°–≠–ì */
        .settings-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-soft);
            border: 3px solid var(--christmas-green);
            position: relative;
            z-index: 1;
        }

        .settings-card::before {
            content: "üéÑ";
            position: absolute;
            top: -15px;
            right: -15px;
            font-size: 2rem;
            background: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid var(--christmas-green);
        }

        .settings-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--christmas-green);
            font-size: 1.2rem;
        }

        .settings-title i {
            color: var(--christmas-red);
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }

        .input-group label {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--dark-blue);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .input-with-icon {
            position: relative;
            display: flex;
            align-items: center;
        }

        .input-with-icon i {
            position: absolute;
            left: 15px;
            color: var(--christmas-red);
        }

        .input-with-icon input {
            width: 100%;
            padding: 12px 15px 12px 45px;
            border: 2px solid var(--christmas-green);
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--christmas-red);
            transition: all 0.3s;
            background: var(--snow-white);
        }

        .input-with-icon input:focus {
            outline: none;
            border-color: var(--christmas-red);
            box-shadow: 0 0 0 3px rgba(196, 30, 58, 0.1);
        }

        .reset-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(to right, var(--christmas-green), #1e7a1e);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .reset-btn:hover {
            background: linear-gradient(to right, #1e7a1e, var(--christmas-green));
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.2);
        }

        /* –¢“Æ“Æ–•–ò–ô–ù –•–≠–°–≠–ì - SCROLL –ë“Æ–•–ò–ô */
        .history-card {
            flex-grow: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow-soft);
            overflow: hidden;
            border: 3px solid var(--gold);
            position: relative;
            z-index: 1;
            min-height: 300px;
            max-height: 400px;
        }

        .history-card::before {
            content: "üìú";
            position: absolute;
            top: -15px;
            left: -15px;
            font-size: 2rem;
            background: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid var(--gold);
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--christmas-green);
            flex-shrink: 0;
        }

        .history-title {
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--christmas-red);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .clear-history {
            background: var(--christmas-red);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .clear-history:hover {
            background: #a00;
            transform: scale(1.05);
        }

        /* HISTORY SCROLL CONTAINER */
        .history-scroll-container {
            flex-grow: 1;
            overflow-y: auto;
            position: relative;
            border-radius: 10px;
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            margin-top: 5px;
            /* FIXED: Smooth scrolling */
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }

        .history-scroll-container::-webkit-scrollbar {
            width: 10px;
        }

        .history-scroll-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
            margin: 5px 0;
        }

        .history-scroll-container::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, var(--christmas-red), var(--christmas-green));
            border-radius: 10px;
            border: 2px solid #f1f1f1;
        }

        .history-scroll-container::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #a00, #1e7a1e);
        }

        /* SCROLL INDICATOR */
        .scroll-indicator {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            opacity: 0.7;
            z-index: 2;
            pointer-events: none;
        }

        .scroll-arrow {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            animation: scrollBounce 2s infinite;
        }

        .scroll-arrow.up {
            animation-delay: 0.5s;
        }

        .scroll-arrow.down {
            animation-delay: 1s;
        }

        @keyframes scrollBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(5px); }
        }

        /* HISTORY LIST */
        .history-list {
            display: flex;
            flex-direction: column;
            padding: 15px;
            gap: 12px;
            min-height: 100%;
        }

        .history-item {
            background: linear-gradient(to right, #fff8f8, #f8fff8);
            border-radius: 12px;
            padding: 15px;
            border-left: 5px solid var(--christmas-red);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .history-item::before {
            content: "üéÅ";
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            opacity: 0.1;
        }

        .history-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.12);
        }

        .history-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }

        .history-time {
            color: var(--dark-blue);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .history-count {
            background: var(--christmas-red);
            color: white;
            padding: 3px 12px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.8rem;
            white-space: nowrap;
        }

        .history-numbers {
            font-family: 'Courier New', monospace;
            font-weight: 700;
            color: var(--dark-blue);
            font-size: 1.1rem;
            line-height: 1.4;
            word-break: break-all;
            margin-bottom: 10px;
        }

        .history-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 5px;
        }

        .copy-btn {
            background: var(--christmas-green);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .copy-btn:hover {
            background: #1e7a1e;
            transform: scale(1.05);
        }

        /* HISTORY EMPTY STATE */
        .history-empty {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            text-align: center;
            color: #aaa;
            height: 100%;
        }

        .history-empty i {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.3;
        }

        .history-empty-text {
            font-family: 'Mountains of Christmas', cursive;
            font-size: 1.2rem;
        }

        /* SCROLL TO TOP/BOTTOM BUTTONS */
        .scroll-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            gap: 10px;
        }

        .scroll-btn {
            background: var(--light-blue);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.85rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
            flex: 1;
            justify-content: center;
        }

        .scroll-btn:hover {
            background: #3a7bc8;
            transform: translateY(-2px);
        }

        .scroll-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* –ë–ê–†–£–£–ù –¢–ê–õ - –°–£–ì–ê–õ–ê–ê–ù–´ –¢–ê–õ–ë–ê–† */
        .lottery-main {
            flex-grow: 1;
            padding: 30px;
            display: flex;
            flex-direction: column;
            background: var(--snow-white);
            position: relative;
            overflow: hidden;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(196, 30, 58, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(45, 90, 39, 0.05) 0%, transparent 50%);
        }

        .lottery-main::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: repeating-linear-gradient(
                90deg,
                var(--christmas-red),
                var(--christmas-red) 20px,
                var(--christmas-green) 20px,
                var(--christmas-green) 40px
            );
        }

        .header-section {
            text-align: center;
            margin-bottom: 30px;
            padding-top: 20px;
        }

        .main-title {
            font-family: 'Mountains of Christmas', cursive;
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--christmas-red);
            text-shadow: 3px 3px 0 rgba(45, 90, 39, 0.2);
        }

        .main-subtitle {
            color: var(--dark-blue);
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
            font-weight: 600;
        }

        /* –°–¢–ê–¢–ò–°–¢–ò–ö –¢–ê–ë */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        @media (min-width: 768px) {
            .stats-bar {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .stat-item {
            background: white;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow-soft);
            border: 2px solid;
            transition: all 0.3s;
        }

        .stat-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .stat-item:nth-child(1) { border-color: var(--christmas-red); }
        .stat-item:nth-child(2) { border-color: var(--christmas-green); }
        .stat-item:nth-child(3) { border-color: var(--gold); }
        .stat-item:nth-child(4) { border-color: var(--light-blue); }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 5px;
            color: var(--dark-blue);
        }

        .stat-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--dark-blue);
            opacity: 0.8;
        }

        /* “Æ–† –î“Æ–ù–ì–ò–ô–ù –¢–ê–õ–ë–ê–† - –ë“Æ–†–≠–ù –ß–ò–ß–ò–†–≠–≠–ì“Æ–ô */
        .results-section {
            flex-grow: 1;
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 20px;
            min-height: 250px;
            border: 3px dashed var(--christmas-green);
            overflow-y: auto;
            background-image: 
                linear-gradient(45deg, #f8fff8 25%, transparent 25%),
                linear-gradient(-45deg, #f8fff8 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #f8fff8 75%),
                linear-gradient(-45deg, transparent 75%, #f8fff8 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            /* FIXED: –ë“Ø—Ä—ç–Ω —á–∏—á–∏—Ä—ç—ç–≥“Ø–π –±–æ–ª–≥–æ—Ö */
            transition: none !important;
            transform: translate3d(0, 0, 0);
            will-change: transform;
            -webkit-overflow-scrolling: touch;
            overflow-anchor: none;
        }

        .placeholder-text {
            color: #aaa;
            font-size: 1.5rem;
            text-align: center;
            padding: 40px;
            font-family: 'Mountains of Christmas', cursive;
        }

        /* –®–ò–ù–≠ –ñ–ò–õ–ò–ô–ù –ë”®–ú–ë”®–ì - –ë“Æ–†–≠–ù –ß–ò–ß–ò–†–≠–≠–ì“Æ–ô */
        .christmas-ball {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 800;
            font-size: 2rem;
            position: relative;
            /* FIXED: –ß–∏—á–∏—Ä—ç—ç–≥“Ø–π animation */
            animation: smoothBallPop 0.7s cubic-bezier(0.23, 1, 0.32, 1) forwards;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.3s ease;
            border: 3px solid white;
            overflow: hidden;
            /* FIXED: –ß–∏—á–∏—Ä—ç—ç–≥“Ø–π –±–æ–ª–≥–æ—Ö */
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
            -webkit-font-smoothing: subpixel-antialiased;
            will-change: transform, opacity;
            animation-fill-mode: forwards;
        }

        .christmas-ball::before {
            content: "";
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: var(--gold);
            border-radius: 50%;
            z-index: 2;
        }

        .christmas-ball::after {
            content: "";
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            border: 3px solid white;
            border-radius: 50%;
            z-index: 1;
        }

        /* FIXED: Mouse hover “Ø–µ–¥ —á–∏—á–∏—Ä—ç—ç—Ö–≥“Ø–π –±–æ–ª–≥–æ—Å–æ–Ω */
        .christmas-ball:hover {
            transform: scale(1.05) translate3d(0, 0, 0);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25);
        }

        @keyframes smoothBallPop {
            0% { 
                transform: scale(0.3) translate3d(0, 0, 0); 
                opacity: 0; 
            }
            70% { 
                transform: scale(1.03) translate3d(0, 0, 0); 
                opacity: 0.9;
            }
            100% { 
                transform: scale(1) translate3d(0, 0, 0); 
                opacity: 1; 
            }
        }

        .ball-number {
            position: relative;
            z-index: 3;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            /* FIXED: Text —á–∏—á–∏—Ä—ç—Ö–≥“Ø–π */
            display: block;
            transform: translate3d(0, 0, 0);
        }

        .ball-decoration {
            position: absolute;
            font-size: 1.5rem;
            z-index: 1;
            opacity: 0.3;
            transform: translate3d(0, 0, 0);
        }

        /* –¢–û–í–ß–õ–£–£–†–£–£–î - –ß–ò–ß–ò–†–≠–≠–ì“Æ–ô */
        .controls-section {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            /* FIXED: –¢–æ–≤—á–ª—É—É—Ä—É—É–¥—ã–Ω —Ç–∞–ª–±–∞—Ä —á–∏—á–∏—Ä—ç—Ö–≥“Ø–π */
            transform: translate3d(0, 0, 0);
        }

        @media (min-width: 768px) {
            .controls-section {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .draw-btn {
            padding: 20px 10px;
            border: none;
            border-radius: 16px;
            font-weight: 800;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            box-shadow: 0 8px 0 rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            font-family: 'Mountains of Christmas', cursive;
            /* FIXED: –¢–æ–≤—á–ª—É—É—Ä —á–∏—á–∏—Ä—ç—Ö–≥“Ø–π */
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
        }

        .draw-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
        }

        .draw-btn:active {
            transform: translateY(6px) translate3d(0, 0, 0);
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
        }

        .draw-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: translate3d(0, 0, 0) !important;
            box-shadow: 0 8px 0 rgba(0, 0, 0, 0.2) !important;
        }

        /* FIXED: Hover “Ø–µ–¥ –∂–∏–≥–¥ animation */
        .draw-btn:hover:not(:disabled) {
            transform: translateY(-3px) translate3d(0, 0, 0);
            box-shadow: 0 12px 0 rgba(0, 0, 0, 0.2);
        }

        .draw-btn-1 {
            background: linear-gradient(to bottom, #FFD700, #FFA500);
            color: #8B0000;
            border: 3px solid #FFA500;
        }

        .draw-btn-2 {
            background: linear-gradient(to bottom, #C0C0C0, #A0A0A0);
            color: #333;
            border: 3px solid #A0A0A0;
        }

        .draw-btn-5 {
            background: linear-gradient(to bottom, #c41e3a, #8b0000);
            color: #FFF;
            border: 3px solid #8b0000;
        }

        .draw-btn-10 {
            background: linear-gradient(to bottom, #2d5a27, #1e3d1e);
            color: #FFF;
            border: 3px solid #1e3d1e;
        }

        .btn-icon {
            font-size: 2.2rem;
            transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            /* FIXED: Icon —á–∏—á–∏—Ä—ç—Ö–≥“Ø–π */
            display: inline-block;
            transform: translate3d(0, 0, 0);
        }

        /* FIXED: –¢–æ–≤—á –¥—ç—ç—Ä mouse –æ—á–∏—Ö–æ–¥ icon —á–∏—á–∏—Ä—ç—Ö–≥“Ø–π */
        .draw-btn:hover:not(:disabled) .btn-icon {
            transform: scale(1.05) translate3d(0, 0, 0);
        }

        .btn-text {
            font-size: 1.3rem;
            letter-spacing: 1px;
        }

        .btn-count {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            color: #333;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.9rem;
            font-weight: 900;
            border: 2px solid;
            transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            transform: translate3d(0, 0, 0);
        }

        /* FIXED: Count number —á–∏—á–∏—Ä—ç—Ö–≥“Ø–π */
        .draw-btn:hover:not(:disabled) .btn-count {
            transform: scale(1.05) translate3d(0, 0, 0);
        }

        .draw-btn-1 .btn-count { border-color: #FFA500; }
        .draw-btn-2 .btn-count { border-color: #A0A0A0; }
        .draw-btn-5 .btn-count { border-color: #8b0000; }
        .draw-btn-10 .btn-count { border-color: #1e3d1e; }

        /* –•–û–û–õ–û–ô–ù –î–≠–õ–ì–≠–¶ */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--christmas-green);
            color: white;
            padding: 20px 30px;
            border-radius: 12px;
            box-shadow: var(--shadow-soft);
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 1000;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
            border-left: 6px solid var(--gold);
            max-width: 350px;
            /* FIXED: Notification —á–∏—á–∏—Ä—ç—Ö–≥“Ø–π */
            transform: translate3d(400px, 0, 0);
        }

        .notification.show {
            transform: translate3d(0, 0, 0);
            opacity: 1;
        }

        .notification-icon {
            font-size: 1.8rem;
        }

        .notification-content {
            flex-grow: 1;
        }

        .notification-title {
            font-weight: 700;
            margin-bottom: 5px;
        }

        .notification-message {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .notification-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .notification-close:hover {
            opacity: 1;
        }

        /* –ê–î–ê–ü–¢–ò–í –î–≠–õ–ì–≠–†–≠–ù–ì“Æ–ô */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                overflow-y: auto;
            }
            
            .main-container {
                min-height: auto;
                height: auto;
            }
            
            .main-title {
                font-size: 2.5rem;
            }
            
            .stats-bar {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .christmas-ball {
                width: 70px;
                height: 70px;
                font-size: 1.6rem;
            }
            
            .draw-btn {
                padding: 15px 5px;
                font-size: 1rem;
            }
            
            .btn-icon {
                font-size: 1.8rem;
            }
            
            .btn-text {
                font-size: 1.1rem;
            }
            
            .santa-sidebar {
                min-width: 100%;
            }
            
            .history-card {
                max-height: 350px;
            }
        }

        /* –ö–û–ù–§–ï–¢–¢–ò –≠–§–§–ï–ö–¢ - –ß–ò–ß–ò–†–≠–≠–ì“Æ–ô */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            opacity: 0;
            z-index: 2;
            animation: smoothConfettiFall linear forwards;
            transform: translate3d(0, 0, 0);
        }

        @keyframes smoothConfettiFall {
            0% {
                transform: translateY(0) rotate(0deg) translate3d(0, 0, 0);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg) translate3d(0, 0, 0);
                opacity: 0;
            }
        }

        /* –®–ò–ù–≠ –ñ–ò–õ–ò–ô–ù –î–≠–≠–õ–°–≠–ù –î–≠–í–°–ì–≠–≠–† */
        .holiday-background {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .holiday-ornament {
            position: absolute;
            font-size: 2rem;
            opacity: 0.1;
            animation: float 15s infinite linear;
            transform: translate3d(0, 0, 0);
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg) translate3d(0, 0, 0); }
            50% { transform: translateY(-20px) rotate(180deg) translate3d(0, 0, 0); }
            100% { transform: translateY(0) rotate(360deg) translate3d(0, 0, 0); }
        }

        /* –ü–†–û–ì–†–ï–°–° –ë–ê–† */
        .progress-container {
            margin-top: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            height: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, var(--christmas-red), var(--christmas-green));
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.23, 1, 0.32, 1);
            transform: translate3d(0, 0, 0);
        }

        /* LOADING ANIMATION - –ß–ò–ß–ò–†–≠–≠–ì“Æ–ô */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s cubic-bezier(0.23, 1, 0.32, 1), visibility 0.3s ease;
            transform: translate3d(0, 0, 0);
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .loading-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow-soft);
            min-width: 200px;
            transform: translate3d(0, 0, 0);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--christmas-red);
            border-radius: 50%;
            animation: smoothSpin 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
            margin: 0 auto 20px;
            transform: translate3d(0, 0, 0);
        }

        @keyframes smoothSpin {
            0% { transform: rotate(0deg) translate3d(0, 0, 0); }
            100% { transform: rotate(360deg) translate3d(0, 0, 0); }
        }

        /* PERFORMANCE OPTIMIZATION */
        .performance-fix {
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
            perspective: 1000;
            -webkit-font-smoothing: subpixel-antialiased;
        }

        /* SCROLLBAR FIX */
        * {
            scrollbar-width: thin;
            scrollbar-color: var(--christmas-red) #f1f1f1;
        }
    </style>
</head>
<body>

    <!-- –¶–ê–°–ù–´ –≠–§–§–ï–ö–¢ -->
    <div class="snowflakes" id="snowflakes"></div>
    
    <!-- –®–ò–ù–≠ –ñ–ò–õ–ò–ô–ù –î–≠–≠–õ–°–≠–ù –î–≠–í–°–ì–≠–≠–† -->
    <div class="holiday-background" id="holidayBg"></div>

    <!-- LOADING OVERLAY -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3 class="christmas-font">–ê–∑—Ç–∞–Ω–≥ —Ç–æ–¥—Ä—É—É–ª–∂ –±–∞–π–Ω–∞...</h3>
            <p id="loadingMessage">–¢“Ø—Ä —Ö“Ø–ª—ç—ç–Ω—ç “Ø“Ø</p>
        </div>
    </div>

    <!-- –ì–û–õ –ö–û–ù–¢–ï–ô–ù–ï–† -->
    <div class="main-container performance-fix">
        <!-- –ó“Æ“Æ–ù –¢–ê–õ - –°–ê–ù–¢–ê–ì–ò–ô–ù –¢–ê–õ–ë–ê–† -->
        <div class="santa-sidebar performance-fix">
            <div class="santa-header">
                <div class="santa-icon">üéÖ</div>
                <div class="santa-title christmas-font">–°–ê–ù–¢–ê –ö–õ–ê–£–°</div>
                <div class="santa-subtitle">–®–∏–Ω—ç –∂–∏–ª–∏–π–Ω –∞–∑—Ç–∞–Ω —Ç–æ–¥—Ä—É—É–ª–∞–≥—á</div>
            </div>
            
            <div class="settings-card performance-fix">
                <div class="settings-title">
                    <i class="fas fa-candy-cane"></i>
                    <span>–°—É–≥–∞–ª–∞–∞–Ω—ã –¢–æ—Ö–∏—Ä–≥–æ–æ</span>
                </div>
                
                <div class="input-group">
                    <label for="maxLimit">
                        <i class="fas fa-star"></i> –î—ç—ç–¥ —Ö—è–∑–≥–∞–∞—Ä (1-?)
                    </label>
                    <div class="input-with-icon">
                        <i class="fas fa-hashtag"></i>
                        <input type="number" id="maxLimit" value="2025" min="1" max="9999">
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>
                
                <button class="reset-btn performance-fix" onclick="resetLottery()">
                    <i class="fas fa-snowflake"></i>
                    <span>–®–ò–ù–≠–ß–õ–≠–•</span>
                </button>
            </div>
            
            <div class="history-card performance-fix">
                <div class="history-header">
                    <div class="history-title">
                        <i class="fas fa-gifts"></i>
                        <span>”®–º–Ω”©—Ö –ê–∑—Ç–∞–Ω—É—É–¥</span>
                    </div>
                    <button class="clear-history performance-fix" onclick="clearHistory()">
                        <i class="fas fa-tree"></i>
                        <span>–¶—ç–≤—ç—Ä–ª—ç—Ö</span>
                    </button>
                </div>
                
                <div class="history-scroll-container" id="historyScrollContainer">
                    <div class="scroll-indicator">
                        <div class="scroll-arrow up">‚Üë</div>
                        <div class="scroll-arrow down">‚Üì</div>
                    </div>
                    <div id="historyList" class="history-list">
                        <div class="history-empty">
                            <i class="fas fa-gift"></i>
                            <div class="history-empty-text christmas-font">–°—É–≥–∞–ª–∞–∞–Ω—ã —Ç“Ø“Ø—Ö —ç–Ω–¥ —Ö–∞—Ä–∞–≥–¥–∞–Ω–∞</div>
                        </div>
                    </div>
                </div>
                
                <div class="scroll-buttons">
                    <button class="scroll-btn" onclick="scrollToTop()" id="scrollTopBtn" disabled>
                        <i class="fas fa-arrow-up"></i>
                        <span>–î—ç—ç—à</span>
                    </button>
                    <button class="scroll-btn" onclick="scrollToBottom()" id="scrollBottomBtn" disabled>
                        <i class="fas fa-arrow-down"></i>
                        <span>–î–æ–æ—à</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- –ë–ê–†–£–£–ù –¢–ê–õ - –°–£–ì–ê–õ–ê–ê -->
        <div class="lottery-main performance-fix">
            <div class="header-section">
                <h1 class="main-title christmas-font">–®–∏–Ω—ç –ñ–∏–ª–∏–π–Ω –°—É–≥–∞–ª–∞–∞</h1>
                <p class="main-subtitle">–°–∞–Ω—Ç–∞–≥–∏–π–Ω –±”©–º–±”©–≥–Ω”©”©—Å –¥–∞–≤—Ö–∞—Ä–¥–∞—Ö–≥“Ø–π –∞–∑—Ç–∞–π –¥—É–≥–∞–∞—Ä—É—É–¥—ã–≥ —Å–æ–Ω–≥–æ–Ω–æ</p>
            </div>
            
            <div class="stats-bar">
                <div class="stat-item performance-fix">
                    <div class="stat-icon">üéÅ</div>
                    <div class="stat-value" id="totalNumbers">2025</div>
                    <div class="stat-label">–ù–ò–ô–¢ –ë–≠–õ–≠–ì</div>
                </div>
                <div class="stat-item performance-fix">
                    <div class="stat-icon">üåü</div>
                    <div class="stat-value" id="drawnNumbers">0</div>
                    <div class="stat-label">–û–õ–î–û–ì–î–°–û–ù</div>
                </div>
                <div class="stat-item performance-fix">
                    <div class="stat-icon">‚ùÑÔ∏è</div>
                    <div class="stat-value" id="remainingNumbers">2025</div>
                    <div class="stat-label">“Æ–õ–î–°–≠–ù</div>
                </div>
                <div class="stat-item performance-fix">
                    <div class="stat-icon">üìú</div>
                    <div class="stat-value" id="historyCount">0</div>
                    <div class="stat-label">–¢“Æ“Æ–•</div>
                </div>
            </div>
            
            <div id="resultArea" class="results-section performance-fix">
                <div class="placeholder-text christmas-font">
                    <i class="fas fa-star" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.3;"></i>
                    <div>–î—ç—ç—Ä—Ö —Ç–æ–≤—á–ª—É—É—Ä—É—É–¥–∞–∞—Ä —Å—É–≥–∞–ª–∞–∞–≥–∞–∞ —ç—Ö–ª“Ø“Ø–ª–Ω—ç “Ø“Ø!</div>
                </div>
            </div>
            
            <div class="controls-section performance-fix">
                <button class="draw-btn draw-btn-1 christmas-font performance-fix" onclick="startLottery(1)">
                    <span class="btn-icon">üéÑ</span>
                    <span class="btn-text">1 –ê–ó–¢–ê–ù</span>
                    <span class="btn-count">1</span>
                </button>
                
                <button class="draw-btn draw-btn-2 christmas-font performance-fix" onclick="startLottery(2)">
                    <span class="btn-icon">üéÖ</span>
                    <span class="btn-text">2 –ê–ó–¢–ê–ù</span>
                    <span class="btn-count">2</span>
                </button>
                
                <button class="draw-btn draw-btn-5 christmas-font performance-fix" onclick="startLottery(5)">
                    <span class="btn-icon">ü¶å</span>
                    <span class="btn-text">5 –ê–ó–¢–ê–ù</span>
                    <span class="btn-count">5</span>
                </button>
                
                <button class="draw-btn draw-btn-10 christmas-font performance-fix" onclick="startLottery(10)">
                    <span class="btn-icon">‚ú®</span>
                    <span class="btn-text">10 –ê–ó–¢–ê–ù</span>
                    <span class="btn-count">10</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- –•–û–û–õ–û–ô–ù –î–≠–õ–ì–≠–¶ -->
    <div id="notification" class="notification performance-fix">
        <div class="notification-icon">üéÑ</div>
        <div class="notification-content">
            <div class="notification-title" id="notificationTitle">–ê–º–∂–∏–ª—Ç—Ç–∞–π!</div>
            <div class="notification-message" id="notificationMessage">–¢–æ–æ–Ω—É—É–¥ –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö—É—É–ª–∞–≥–¥–ª–∞–∞!</div>
        </div>
        <button class="notification-close" onclick="closeNotification()">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <script>
        // JAVASCRIPT LOGIC - SCROLL –ë“Æ–•–ò–ô –•–£–í–ò–õ–ë–ê–†
        const MIN_NUMBER = 1;
        let drawnNumbers = new Set();
        let history = [];
        let notificationTimeout;
        let isDrawing = false;
        let animationFrameId = null;
        
        // DOM –ë–≠–õ–î–≠–•
        document.addEventListener('DOMContentLoaded', () => {
            createSnowflakes();
            createHolidayBackground();
            updateStats();
            updateDrawButtons();
            updateProgressBar();
            updateScrollButtons();
            
            // –•—è–∑–≥–∞–∞—Ä input-–¥ event listener –Ω—ç–º—ç—Ö
            const limitInput = document.getElementById('maxLimit');
            limitInput.addEventListener('change', function() {
                validateLimitInput();
                resetLottery();
            });
            
            limitInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    validateLimitInput();
                    resetLottery();
                }
            });
            
            // Scroll container-–¥ event listener –Ω—ç–º—ç—Ö
            const scrollContainer = document.getElementById('historyScrollContainer');
            if (scrollContainer) {
                scrollContainer.addEventListener('scroll', () => {
                    updateScrollButtons();
                });
            }
            
            // –®–∏–Ω—ç –∂–∏–ª–∏–π–Ω –º—ç–Ω–¥—á–∏–ª–≥—ç—ç
            setTimeout(() => {
                showNotification("–®–∏–Ω—ç –∂–∏–ª–∏–π–Ω –º—ç–Ω–¥ —Ö“Ø—Ä–≥—ç–µ! üéâ", "–ê–∑ –∂–∞—Ä–≥–∞–ª—ã–Ω —Ç”©–ª”©”© —Å—É–≥–∞–ª–∞–∞–≥–∞–∞ —ç—Ö–ª“Ø“Ø–ª—ç—ç—Ä—ç–π!", "success");
            }, 1000);
            
            // Scroll event —á–∏—á–∏—Ä—ç—Ö–≥“Ø–π –±–æ–ª–≥–æ—Ö
            window.addEventListener('scroll', function() {
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                }
                animationFrameId = requestAnimationFrame(function() {});
            }, { passive: true });
        });
        
        // –¶–ê–° “Æ“Æ–°–ì–≠–•
        function createSnowflakes() {
            const snowflakesContainer = document.getElementById('snowflakes');
            const snowflakeCount = 100;
            
            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                
                // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π —Ö—ç–º–∂—ç—ç
                const size = Math.random() * 5 + 2;
                snowflake.style.width = `${size}px`;
                snowflake.style.height = `${size}px`;
                
                // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π –±–∞–π—Ä–ª–∞–ª
                snowflake.style.left = `${Math.random() * 100}vw`;
                
                // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π —É–Ω–∞–ª—Ç—ã–Ω —Ö—É—Ä–¥
                const duration = Math.random() * 10 + 10;
                snowflake.style.animationDuration = `${duration}s`;
                
                // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π —Ö–æ–π—à–ª—É—É–ª–∞—Ö
                snowflake.style.animationDelay = `${Math.random() * 5}s`;
                
                // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π opacity
                snowflake.style.opacity = Math.random() * 0.7 + 0.3;
                
                snowflakesContainer.appendChild(snowflake);
            }
        }
        
        // –®–ò–ù–≠ –ñ–ò–õ–ò–ô–ù –î–≠–≠–õ–°–≠–ù –î–≠–í–°–ì–≠–≠–† “Æ“Æ–°–ì–≠–•
        function createHolidayBackground() {
            const bgContainer = document.getElementById('holidayBg');
            const ornaments = ['üéÑ', 'üéÅ', 'üåü', '‚ùÑÔ∏è', 'ü¶å', 'üîî', '‚≠ê', '‚ú®'];
            const ornamentCount = 15;
            
            for (let i = 0; i < ornamentCount; i++) {
                const ornament = document.createElement('div');
                ornament.classList.add('holiday-ornament');
                ornament.textContent = ornaments[Math.floor(Math.random() * ornaments.length)];
                
                // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π –±–∞–π—Ä–ª–∞–ª
                ornament.style.left = `${Math.random() * 100}%`;
                ornament.style.top = `${Math.random() * 100}%`;
                
                // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π —Ö—ç–º–∂—ç—ç
                const size = Math.random() * 40 + 30;
                ornament.style.fontSize = `${size}px`;
                
                // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π animation —Ö—É—Ä–¥
                const duration = Math.random() * 20 + 20;
                ornament.style.animationDuration = `${duration}s`;
                
                bgContainer.appendChild(ornament);
            }
        }
        
        // –•–Ø–ó–ì–ê–ê–†–´–ù INPUT –®–ê–õ–ì–ê–•
        function validateLimitInput() {
            const limitInput = document.getElementById('maxLimit');
            let limit = parseInt(limitInput.value);
            
            if (isNaN(limit) || limit < 1) {
                limitInput.value = 2025;
                showNotification("–ê–ª–¥–∞–∞", "–î—ç—ç–¥ —Ö—è–∑–≥–∞–∞—Ä 1-—ç—ç—Å –∏—Ö –±–∞–π—Ö —ë—Å—Ç–æ–π!", "warning");
                return 2025;
            }
            
            if (limit > 9999) {
                limitInput.value = 9999;
                showNotification("–ê–Ω—Ö–∞–∞—Ä", "–î—ç—ç–¥ —Ö—è–∑–≥–∞–∞—Ä 9999-—ç—ç—Å —Ö—ç—Ç—Ä—ç—Ö–≥“Ø–π!", "warning");
                return 9999;
            }
            
            return limit;
        }
        
        // –°–£–ì–ê–õ–ê–ê –î–ê–•–ò–ù –≠–•–õ“Æ“Æ–õ–≠–•
        function resetLottery() {
            if (isDrawing) return;
            
            if (drawnNumbers.size > 0) {
                if (!confirm("–®–∏–Ω—ç –∂–∏–ª–∏–π–Ω —Å—É–≥–∞–ª–∞–∞–≥ –¥–∞—Ö–∏–Ω —ç—Ö–ª“Ø“Ø–ª—ç—Ö “Ø“Ø? –û–¥–æ–æ–≥–∏–π–Ω —Ç“Ø“Ø—Ö —É—Å—Ç–∞–Ω–∞.")) {
                    return;
                }
            }
            
            drawnNumbers.clear();
            history = [];
            
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = `
                <div class="history-empty">
                    <i class="fas fa-gift"></i>
                    <div class="history-empty-text christmas-font">–°—É–≥–∞–ª–∞–∞–Ω—ã —Ç“Ø“Ø—Ö —ç–Ω–¥ —Ö–∞—Ä–∞–≥–¥–∞–Ω–∞</div>
                </div>
            `;
            
            const resultArea = document.getElementById('resultArea');
            resultArea.innerHTML = `
                <div class="placeholder-text christmas-font">
                    <i class="fas fa-star" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.3;"></i>
                    <div>–î—ç—ç—Ä—Ö —Ç–æ–≤—á–ª—É—É—Ä—É—É–¥–∞–∞—Ä —Å—É–≥–∞–ª–∞–∞–≥–∞–∞ —ç—Ö–ª“Ø“Ø–ª–Ω—ç “Ø“Ø!</div>
                </div>
            `;
            
            updateStats();
            updateDrawButtons();
            updateProgressBar();
            updateScrollButtons();
            showNotification("–®–∏–Ω—ç—á–ª—ç–≥–¥–ª—ç—ç", "–®–∏–Ω—ç –∂–∏–ª–∏–π–Ω —Å—É–≥–∞–ª–∞–∞ –∞–º–∂–∏–ª—Ç—Ç–∞–π —ç—Ö–ª—ç–≤!", "success");
        }
        
        // –¢“Æ“Æ–• –¶–≠–í–≠–†–õ–≠–•
        function clearHistory() {
            if (isDrawing) return;
            
            if (history.length === 0) return;
            
            if (!confirm("–®–∏–Ω—ç –∂–∏–ª–∏–π–Ω —Ç“Ø“Ø—Ö–∏–π–≥ –±“Ø—Ä—ç–Ω —É—Å—Ç–≥–∞—Ö —É—É?")) return;
            
            history = [];
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = `
                <div class="history-empty">
                    <i class="fas fa-gift"></i>
                    <div class="history-empty-text christmas-font">–°—É–≥–∞–ª–∞–∞–Ω—ã —Ç“Ø“Ø—Ö —ç–Ω–¥ —Ö–∞—Ä–∞–≥–¥–∞–Ω–∞</div>
                </div>
            `;
            
            updateStats();
            updateScrollButtons();
            showNotification("–¢“Ø“Ø—Ö —Ü—ç–≤—ç—Ä–ª—ç–≥–¥–ª—ç—ç", "–®–∏–Ω—ç –∂–∏–ª–∏–π–Ω —Ç“Ø“Ø—Ö –∞–º–∂–∏–ª—Ç—Ç–∞–π —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞", "success");
        }
        
        // –°–£–ì–ê–õ–ê–ê –≠–•–õ“Æ“Æ–õ–≠–•
        function startLottery(count) {
            if (isDrawing) {
                showNotification("–¢“Ø—Ä —Ö“Ø–ª—ç—ç–Ω—ç “Ø“Ø", "”®–º–Ω”©—Ö —Å—É–≥–∞–ª–∞–∞ –¥—É—É—Å–∞–∞–≥“Ø–π –±–∞–π–Ω–∞", "warning");
                return;
            }
            
            const MAX_NUMBER = validateLimitInput();
            const resultArea = document.getElementById('resultArea');
            const availableCount = MAX_NUMBER - drawnNumbers.size;
            
            if (count > availableCount) {
                showNotification("–•–∞–Ω–≥–∞–ª—Ç–≥“Ø–π", `–ó”©–≤—Ö”©–Ω ${availableCount} —à–∏—Ä—Ö—ç–≥ —Ç–æ–æ “Ø–ª–¥—Å—ç–Ω –±–∞–π–Ω–∞!`, "warning");
                return;
            }
            
            // –°—É–≥–∞–ª–∞–∞ —ç—Ö–ª“Ø“Ø–ª—ç—Ö —Ç”©–ª”©–≤—Ç –æ—Ä—É—É–ª–∞—Ö
            isDrawing = true;
            showLoading(`–ê–∑—Ç–∞–Ω–≥ —Ç–æ–¥—Ä—É—É–ª–∂ –±–∞–π–Ω–∞... (${count} —à–∏—Ä—Ö—ç–≥)`);
            
            // –¢–æ–≤—á–ª—É—É—Ä—É—É–¥—ã–≥ —Ç“Ø—Ä –∏–¥—ç–≤—Ö–≥“Ø–π –±–æ–ª–≥–æ—Ö
            disableDrawButtons(true);
            
            // FIXED: requestAnimationFrame –∞—à–∏–≥–ª–∞–Ω –∂–∏–≥–¥ —ç—Ö–ª“Ø“Ø–ª—ç—Ö
            requestAnimationFrame(() => {
                setTimeout(() => {
                    let newDrawnNumbers = new Set();
                    
                    // –ê–ª–≥–æ—Ä–∏—Ç–º—ã–≥ —Å–∞–π–∂—Ä—É—É–ª—Å–∞–Ω
                    if (count <= availableCount / 2) {
                        // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π —Å–æ–Ω–≥–æ–ª—Ç
                        let attempts = 0;
                        const maxAttempts = count * 100;
                        
                        while (newDrawnNumbers.size < count && attempts < maxAttempts) {
                            const randomNum = Math.floor(Math.random() * (MAX_NUMBER - MIN_NUMBER + 1)) + MIN_NUMBER;
                            
                            if (!drawnNumbers.has(randomNum) && !newDrawnNumbers.has(randomNum)) {
                                newDrawnNumbers.add(randomNum);
                            }
                            attempts++;
                        }
                    } else {
                        // –ë“Ø—Ö –±–æ–ª–æ–º–∂–∏—Ç —Ç–æ–æ–Ω—É—É–¥—ã–Ω –∂–∞–≥—Å–∞–∞–ª—Ç “Ø“Ø—Å–≥—ç—ç–¥ —Å–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π —Å–æ–Ω–≥–æ—Ö
                        const availableNumbers = [];
                        for (let i = MIN_NUMBER; i <= MAX_NUMBER; i++) {
                            if (!drawnNumbers.has(i)) {
                                availableNumbers.push(i);
                            }
                        }
                        
                        // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π —Ö–æ–ª–∏—Ö
                        for (let i = availableNumbers.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [availableNumbers[i], availableNumbers[j]] = [availableNumbers[j], availableNumbers[i]];
                        }
                        
                        // –®–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π —Ç–æ–æ–Ω—ã —Ç–æ–æ–Ω—É—É–¥—ã–≥ —Å–æ–Ω–≥–æ—Ö
                        newDrawnNumbers = new Set(availableNumbers.slice(0, count));
                    }
                    
                    // –•—ç—Ä—ç–≤ —Ö–∞–Ω–≥–∞–ª—Ç—Ç–∞–π —Ç–æ–æ —Å–æ–Ω–≥–æ–≥–¥–æ–æ–≥“Ø–π –±–æ–ª
                    if (newDrawnNumbers.size < count) {
                        hideLoading();
                        isDrawing = false;
                        disableDrawButtons(false);
                        showNotification("–ê–ª–¥–∞–∞", "–•–∞–Ω–≥–∞–ª—Ç—Ç–∞–π —Ç–æ–æ —Å–æ–Ω–≥–æ–∂ —á–∞–¥—Å–∞–Ω–≥“Ø–π. –î–∞—Ö–∏–Ω –æ—Ä–æ–ª–¥–æ–Ω–æ —É—É.", "warning");
                        return;
                    }
                    
                    const finalNewNumbers = Array.from(newDrawnNumbers).sort((a, b) => a - b);
                    finalNewNumbers.forEach(num => drawnNumbers.add(num));
                    
                    // FIXED: “Æ—Ä –¥“Ø–Ω–≥ —Ö–∞—Ä–∞–≥–¥–∞—Ü—Ç–∞–π–≥–∞–∞—Ä —Ö–∞—Ä—É—É–ª–∞—Ö - —á–∏—á–∏—Ä—ç—ç–≥“Ø–π
                    resultArea.innerHTML = '';
                    
                    // FIXED: Animation-—É—É–¥—ã–≥ –∂–∏–≥–¥ —Ö–∏–π—Ö
                    const animationDelay = 150;
                    
                    // FIXED: requestAnimationFrame –∞—à–∏–≥–ª–∞–Ω –∂–∏–≥–¥ animation
                    const animateBalls = (index) => {
                        if (index < finalNewNumbers.length) {
                            requestAnimationFrame(() => {
                                createChristmasBall(finalNewNumbers[index], resultArea);
                                
                                // –î–∞—Ä–∞–∞–≥–∏–π–Ω –±”©–º–±”©–≥
                                setTimeout(() => {
                                    animateBalls(index + 1);
                                }, animationDelay);
                            });
                        } else {
                            // –ë“Ø—Ö –±”©–º–±”©–≥ “Ø“Ø—Å—Å—ç–Ω
                            requestAnimationFrame(() => {
                                // –ë–∞–≥–∞ –∑—ç—Ä—ç–≥ —Ö“Ø–ª—ç—ç–∂ –¥–∞—Ä–∞–∞ –Ω—å –±—É—Å–∞–¥ “Ø–π–ª–¥–ª“Ø“Ø–¥ —Ö–∏–π—Ö
                                setTimeout(() => {
                                    // –¢“Ø“Ø—Ö—ç–¥ –Ω—ç–º—ç—Ö
                                    addToHistory(count, finalNewNumbers);
                                    
                                    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫ —à–∏–Ω—ç—á–ª—ç—Ö
                                    updateStats();
                                    updateProgressBar();
                                    updateScrollButtons();
                                    
                                    // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ —ç—Ñ—Ñ–µ–∫—Ç
                                    setTimeout(() => {
                                        createConfetti();
                                    }, 100);
                                    
                                    // –ú—ç–¥—ç–≥–¥—ç–ª —Ö–∞—Ä—É—É–ª–∞—Ö
                                    showNotification("–ê–º–∂–∏–ª—Ç—Ç–∞–π!", `${count} —à–∏—Ä—Ö—ç–≥ –∞–∑—Ç–∞–Ω –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ç–æ–¥–æ—Ä–ª–æ–æ!`, "success");
                                    
                                    // Loading —Ö–∞–∞—Ö
                                    hideLoading();
                                    
                                    // –°—É–≥–∞–ª–∞–∞ –¥—É—É—Å–≥–∞—Ö
                                    isDrawing = false;
                                    disableDrawButtons(false);
                                    
                                    // –ë“Ø—Ö —Ç–æ–æ –¥—É—É—Å—Å–∞–Ω —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞—Ö
                                    if (availableCount - count === 0) {
                                        setTimeout(() => {
                                            showNotification("–ë–∞—è—Ä —Ö“Ø—Ä–≥—ç–µ! üéâ", `–ë“Æ–• –ë–≠–õ–≠–ì (1-${MAX_NUMBER}) –û–õ–î–û–ì–î–õ–û–û!`, "success", 6000);
                                            createConfetti(true);
                                        }, 500);
                                    }
                                }, 300);
                            });
                        }
                    };
                    
                    // Animation —ç—Ö–ª“Ø“Ø–ª—ç—Ö
                    animateBalls(0);
                }, 300);
            });
        }
        
        // –®–ò–ù–≠ –ñ–ò–õ–ò–ô–ù –ë”®–ú–ë”®–ì “Æ“Æ–°–ì–≠–•
        function createChristmasBall(number, container) {
            const ball = document.createElement('div');
            ball.className = 'christmas-ball performance-fix';
            
            // ”®–Ω–≥”© —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–æ—Ö
            let ballColor;
            const ballDecorations = ['üéÑ', 'üéÅ', 'üåü', '‚ùÑÔ∏è', 'ü¶å', 'üîî'];
            const decoration = ballDecorations[Math.floor(Math.random() * ballDecorations.length)];
            
            if (number % 7 === 0) {
                ballColor = 'linear-gradient(135deg, #c41e3a, #8b0000)'; // –£–ª–∞–∞–Ω
            } else if (number % 5 === 0) {
                ballColor = 'linear-gradient(135deg, #2d5a27, #1e3d1e)'; // –ù–æ–≥–æ–æ–Ω
            } else if (number % 3 === 0) {
                ballColor = 'linear-gradient(135deg, #ffd700, #ffa500)'; // –ê–ª—Ç
            } else if (number % 2 === 0) {
                ballColor = 'linear-gradient(135deg, #4a90e2, #0a2e5c)'; // –•”©—Ö
            } else {
                ballColor = 'linear-gradient(135deg, #8a2be2, #4b0082)'; // –ù–∏–ª–∏–π–Ω
            }
            
            ball.style.background = ballColor;
            
            ball.innerHTML = `
                <div class="ball-decoration">${decoration}</div>
                <div class="ball-number">${number}</div>
            `;
            
            // –ë”©–º–±”©–≥ –¥—ç—ç—Ä –¥–∞—Ä—Å–∞–Ω —Ç–æ–æ–≥ —Ö—É—É–ª–∞—Ö
            ball.addEventListener('click', () => {
                if (!isDrawing) {
                    copyToClipboard(number.toString());
                }
            });
            
            container.appendChild(ball);
        }
        
        // LOADING –•–≠–°–≠–ì “Æ–ó“Æ“Æ–õ–≠–•
        function showLoading(message = "–ê–∑—Ç–∞–Ω–≥ —Ç–æ–¥—Ä—É—É–ª–∂ –±–∞–π–Ω–∞...") {
            const loadingOverlay = document.getElementById('loadingOverlay');
            const loadingMessage = document.getElementById('loadingMessage');
            
            loadingMessage.textContent = message;
            loadingOverlay.classList.add('active');
        }
        
        // LOADING –•–≠–°–≠–ì –ù–£–£–•
        function hideLoading() {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.classList.remove('active');
        }
        
        // –¢–û–í–ß–õ–£–£–†–£–£–î–´–ì –ò–î–≠–í–•–ì“Æ–ô/–ò–î–≠–í–•–¢–≠–ô –ë–û–õ–ì–û–•
        function disableDrawButtons(disabled) {
            const drawButtons = document.querySelectorAll('.draw-btn');
            drawButtons.forEach(btn => {
                btn.disabled = disabled;
            });
            
            const resetBtn = document.querySelector('.reset-btn');
            const clearHistoryBtn = document.querySelector('.clear-history');
            
            if (resetBtn) resetBtn.disabled = disabled;
            if (clearHistoryBtn) clearHistoryBtn.disabled = disabled;
        }
        
        // –ö–û–ù–§–ï–¢–¢–ò –≠–§–§–ï–ö–¢ “Æ“Æ–°–ì–≠–•
        function createConfetti(isMajor = false) {
            const confettiCount = isMajor ? 200 : 50;
            const colors = ['#c41e3a', '#2d5a27', '#ffd700', '#4a90e2', '#ffffff'];
            
            requestAnimationFrame(() => {
                for (let i = 0; i < confettiCount; i++) {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    
                    // ”®–Ω–≥”©
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    
                    // –•—ç–º–∂—ç—ç
                    const size = Math.random() * 10 + 5;
                    confetti.style.width = `${size}px`;
                    confetti.style.height = `${size}px`;
                    
                    // –•—ç–ª–±—ç—Ä
                    if (Math.random() > 0.5) {
                        confetti.style.borderRadius = '50%';
                    }
                    
                    // –ë–∞–π—Ä–ª–∞–ª
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.top = `-10px`;
                    
                    // Animation
                    const animationDuration = Math.random() * 3 + 2;
                    const animationDelay = Math.random() * 1;
                    
                    confetti.style.animation = `smoothConfettiFall ${animationDuration}s ease-out ${animationDelay}s forwards`;
                    
                    document.body.appendChild(confetti);
                    
                    // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ —É—Å—Ç–≥–∞—Ö
                    setTimeout(() => {
                        if (confetti.parentNode) {
                            confetti.parentNode.removeChild(confetti);
                        }
                    }, (animationDuration + animationDelay) * 1000);
                }
            });
        }
        
        // –°–¢–ê–¢–ò–°–¢–ò–ö –®–ò–ù–≠–ß–õ–≠–•
        function updateStats() {
            const MAX_NUMBER = validateLimitInput();
            const drawnCount = drawnNumbers.size;
            const remainingCount = MAX_NUMBER - drawnCount;
            
            requestAnimationFrame(() => {
                document.getElementById('totalNumbers').textContent = MAX_NUMBER.toLocaleString();
                document.getElementById('drawnNumbers').textContent = drawnCount.toLocaleString();
                document.getElementById('remainingNumbers').textContent = remainingCount.toLocaleString();
                document.getElementById('historyCount').textContent = history.length.toLocaleString();
            });
        }
        
        // –ü–†–û–ì–†–ï–°–° –ë–ê–† –®–ò–ù–≠–ß–õ–≠–•
        function updateProgressBar() {
            const MAX_NUMBER = validateLimitInput();
            const drawnCount = drawnNumbers.size;
            const progressPercent = (drawnCount / MAX_NUMBER) * 100;
            
            const progressBar = document.getElementById('progressBar');
            
            requestAnimationFrame(() => {
                progressBar.style.width = `${progressPercent}%`;
                
                // ”®–Ω–≥”© ”©”©—Ä—á–ª”©—Ö
                if (progressPercent < 30) {
                    progressBar.style.background = 'linear-gradient(to right, var(--christmas-red), #ff6b6b)';
                } else if (progressPercent < 70) {
                    progressBar.style.background = 'linear-gradient(to right, var(--christmas-red), var(--gold))';
                } else {
                    progressBar.style.background = 'linear-gradient(to right, var(--christmas-red), var(--christmas-green))';
                }
            });
        }
        
        // –¢–û–í–ß–õ–£–£–†–£–£–î–´–ù –¢–û–•–ò–†–ì–û–û –®–ò–ù–≠–ß–õ–≠–•
        function updateDrawButtons() {
            const MAX_NUMBER = validateLimitInput();
            const availableCount = MAX_NUMBER - drawnNumbers.size;
            const drawButtons = document.querySelectorAll('.draw-btn');
            
            requestAnimationFrame(() => {
                drawButtons.forEach(btn => {
                    const count = parseInt(btn.querySelector('.btn-count').textContent);
                    
                    if (count > availableCount) {
                        btn.disabled = true;
                        btn.title = `–ó”©–≤—Ö”©–Ω ${availableCount} —Ç–æ–æ “Ø–ª–¥—Å—ç–Ω`;
                    } else if (!isDrawing) {
                        btn.disabled = false;
                        btn.title = `${count} —à–∏—Ä—Ö—ç–≥ –∞–∑—Ç–∞–Ω —Ç–æ–¥—Ä—É—É–ª–∞—Ö`;
                    }
                });
            });
        }
        
        // SCROLL –¢–û–í–ß–õ–£–£–†–£–£–î–´–ù –¢–û–•–ò–†–ì–û–û –®–ò–ù–≠–ß–õ–≠–•
        function updateScrollButtons() {
            const scrollContainer = document.getElementById('historyScrollContainer');
            const scrollTopBtn = document.getElementById('scrollTopBtn');
            const scrollBottomBtn = document.getElementById('scrollBottomBtn');
            
            if (!scrollContainer || !scrollTopBtn || !scrollBottomBtn) return;
            
            const scrollTop = scrollContainer.scrollTop;
            const scrollHeight = scrollContainer.scrollHeight;
            const clientHeight = scrollContainer.clientHeight;
            
            // Scroll –¥—ç—ç—à —Ç–æ–≤—á–ª—É—É—Ä
            scrollTopBtn.disabled = scrollTop === 0;
            
            // Scroll –¥–æ–æ—à —Ç–æ–≤—á–ª—É—É—Ä
            scrollBottomBtn.disabled = Math.ceil(scrollTop + clientHeight) >= scrollHeight - 1;
            
            // –•—ç—Ä—ç–≤ —Ç“Ø“Ø—Ö –±–∞–π—Ö–≥“Ø–π –±–æ–ª —Ç–æ–≤—á–ª—É—É—Ä—É—É–¥—ã–≥ –∏–¥—ç–≤—Ö–≥“Ø–π –±–æ–ª–≥–æ—Ö
            if (history.length === 0) {
                scrollTopBtn.disabled = true;
                scrollBottomBtn.disabled = true;
            }
        }
        
        // SCROLL –î–≠–≠–® –•–ò–ô–•
        function scrollToTop() {
            const scrollContainer = document.getElementById('historyScrollContainer');
            if (!scrollContainer) return;
            
            scrollContainer.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        
        // SCROLL –î–û–û–® –•–ò–ô–•
        function scrollToBottom() {
            const scrollContainer = document.getElementById('historyScrollContainer');
            if (!scrollContainer) return;
            
            scrollContainer.scrollTo({
                top: scrollContainer.scrollHeight,
                behavior: 'smooth'
            });
        }
        
        // –¢“Æ“Æ–•–≠–î –ù–≠–ú–≠–•
        function addToHistory(count, numberArray) {
            const historyList = document.getElementById('historyList');
            const now = new Date();
            const timeString = now.toLocaleTimeString('mn-MN', { 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit' 
            });
            const dateString = now.toLocaleDateString('mn-MN', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
            
            const numbersStr = numberArray.join(', ');
            
            // Placeholder —É—Å—Ç–≥–∞—Ö
            if (historyList.querySelector('.history-empty')) {
                historyList.innerHTML = '';
            }
            
            // –¢“Ø“Ø—Ö–∏–π–Ω —ç–ª–µ–º–µ–Ω—Ç “Ø“Ø—Å–≥—ç—Ö
            const historyEntry = {
                id: Date.now(),
                time: timeString,
                date: dateString,
                count: count,
                numbers: numberArray,
                numbersStr: numbersStr
            };
            
            history.unshift(historyEntry);
            
            // –•–∞–º–≥–∏–π–Ω —Å“Ø“Ø–ª–∏–π–Ω 50 —Ç“Ø“Ø—Ö –ª —Ö–∞–¥–≥–∞–ª–∞—Ö
            if (history.length > 50) {
                history.pop();
            }
            
            // –¢“Ø“Ø—Ö–∏–π–Ω –∂–∞–≥—Å–∞–∞–ª—Ç—ã–≥ —à–∏–Ω—ç—á–ª—ç—Ö
            renderHistory();
        }
        
        // –¢“Æ“Æ–•–ò–ô–ì –î–≠–õ–ì–≠–†–≠–ù–ì“Æ–ô –•–ê–†–£–£–õ–ê–•
        function renderHistory() {
            const historyList = document.getElementById('historyList');
            
            requestAnimationFrame(() => {
                historyList.innerHTML = '';
                
                history.forEach(entry => {
                    const item = document.createElement('div');
                    item.className = 'history-item performance-fix';
                    item.dataset.id = entry.id;
                    
                    item.innerHTML = `
                        <div class="history-meta">
                            <div class="history-time">
                                <i class="far fa-clock"></i> ${entry.time} | ${entry.date}
                            </div>
                            <div class="history-count">${entry.count} –ê–ó–¢–ê–ù</div>
                        </div>
                        <div class="history-numbers">
                            ${entry.numbersStr}
                        </div>
                        <div class="history-actions">
                            <button class="copy-btn performance-fix" onclick="copyToClipboard('${entry.numbersStr.replace(/'/g, "\\'")}')">
                                <i class="far fa-copy"></i> –•—É—É–ª–∞—Ö
                            </button>
                        </div>
                    `;
                    
                    historyList.appendChild(item);
                });
                
                // Scroll –¥–æ–æ—à —à–∏–ª–∂“Ø“Ø–ª—ç—Ö (—à–∏–Ω—ç —Ç“Ø“Ø—Ö –Ω—ç–º—ç–≥–¥—Å—ç–Ω “Ø–µ–¥)
                if (history.length > 0) {
                    setTimeout(() => {
                        const scrollContainer = document.getElementById('historyScrollContainer');
                        if (scrollContainer) {
                            scrollContainer.scrollTop = 0;
                        }
                    }, 100);
                }
            });
        }
        
        // –•–£–£–õ–ê–• –§–£–ù–ö–¶
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification("–•—É—É–ª–∞–≥–¥–ª–∞–∞", `–¢–æ–æ–Ω—É—É–¥: ${text}`, "success");
            }).catch(err => {
                console.error('Failed to copy: ', err);
                showNotification("–ê–ª–¥–∞–∞", "–•—É—É–ª–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞!", "warning");
            });
        }
        
        // –•–û–û–õ–û–ô–ù –î–≠–õ–ì–≠–¶ –•–ê–†–£–£–õ–ê–•
        function showNotification(title, message, type = "success", duration = 4000) {
            const notification = document.getElementById('notification');
            const notificationTitle = document.getElementById('notificationTitle');
            const notificationMessage = document.getElementById('notificationMessage');
            
            // ”®–Ω–≥”© —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–æ—Ö
            if (type === "success") {
                notification.style.background = "var(--christmas-green)";
                notification.style.borderLeftColor = "var(--gold)";
            } else if (type === "warning") {
                notification.style.background = "var(--christmas-red)";
                notification.style.borderLeftColor = "var(--gold)";
            } else {
                notification.style.background = "var(--light-blue)";
                notification.style.borderLeftColor = "var(--gold)";
            }
            
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            
            // ”®–º–Ω”©—Ö timeout —Ü—ç–≤—ç—Ä–ª—ç—Ö
            if (notificationTimeout) {
                clearTimeout(notificationTimeout);
            }
            
            // –î—ç–ª–≥—ç—Ü —Ö–∞—Ä—É—É–ª–∞—Ö
            notification.classList.add('show');
            
            // –•—É–≥–∞—Ü–∞–∞–Ω—ã –¥–∞—Ä–∞–∞ –Ω—É—É—Ö
            notificationTimeout = setTimeout(() => {
                notification.classList.remove('show');
            }, duration);
        }
        
        // –•–û–û–õ–û–ô–ù –î–≠–õ–ì–≠–¶ –•–ê–ê–•
        function closeNotification() {
            const notification = document.getElementById('notification');
            notification.classList.remove('show');
            
            if (notificationTimeout) {
                clearTimeout(notificationTimeout);
            }
        }
    </script>
</body>
</html>